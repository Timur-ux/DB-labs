@startuml Carsharing

!function $autogenerated($a)
!return "<color:RoyalBlue>" + $a + " <<autogenerated PK>></color>"
!endfunction

!function $unique($a)
!return "<color:Crimson>" + $a + " <<unique>></color>"
!endfunction

!function $setBold($a)
!return "<b>" + $a + " </b>"
!endfunction

!function $hashed($a)
!return $setBold($a) + "<<hashed>>"
!endfunction

skinparam LegendBackgroundColor MistyRose
skinparam LegendBorderColor PaleVioletRed
skinparam LegendFontColor PaleVioletRed

skinparam Class {
    HeaderBackgroundColor PaleGreen
}

'skinparam linetype ortho
skinparam TitleFontColor Sienna

Title ER-диаграмма "Автопрокат"

entity "$setBold("Client")" as client {
    * $autogenerated("id : uuid")
    ..
    * $hashed("password") : string(50)
    * name : string(200)
    surname : string(200)
    * $unique("passport") : string(20)
    email : string(100)
}

entity "$setBold("Contract")" as contract {
  * $autogenerated("id : uuid")
  ..
  * car_id : uuid <<car.id FK>>
  * client_id : uuid <<client.id FK>>
  * rentedBefore : timestamp
}

entity "$setBold("Car")" as car {
    * $autogenerated("id : uuid")
    ..
    * mark : string(100)
    * mileage : uint
    * lastMaintenance : timestamp 
    * currentPosition : address
    * isInUse : bool
}

contract::client_id }-- client::id
contract::car_id }-- car::id

legend right
$setBold("Условные обозначения:")
* - обязательное поле
PK - первичный ключ
FK - внешний ключ
end legend

footer Buchkin Timur, 2024

@enduml
